import{S as Me,i as Re,s as Ye,e as E,t as F,c as y,a as R,g as $,d as o,b as m,a3 as ne,a6 as q,f as U,E as b,h as pe,_ as ie,$ as z,a8 as We,x as N,j as ce,m as ue,o as fe,u as j,v as de,w as Pe,a4 as Ue,k as K,n as H,a5 as ge,a1 as he,a2 as Je,r as we}from"../../../chunks/vendor-a7bd5f25.js";import{s as Be}from"../../../chunks/store-344738a1.js";import{c as Ne}from"../../../chunks/websockets-72c92e35.js";import{P as Ce,r as Qe,p as Le,s as qe}from"../../../chunks/PlayerCard-8965b305.js";import{M as ze}from"../../../chunks/MatchData-f43f9d9c.js";var je="/yanken-game/_app/assets/play-bg-c0f8ec31.png",Ke="/yanken-game/_app/assets/hands-bg-f862f23e.png",He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmRhYmFjYmIsIDIwMjEvMDQvMTQtMDA6Mzk6NDQgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMy4wIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBMDk3NEZDNjVDQ0QxMUVDOTFCMEQ4MjczNTRGN0ZCRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBMDk3NEZDNzVDQ0QxMUVDOTFCMEQ4MjczNTRGN0ZCRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkEwOTc0RkM0NUNDRDExRUM5MUIwRDgyNzM1NEY3RkJGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkEwOTc0RkM1NUNDRDExRUM5MUIwRDgyNzM1NEY3RkJGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+y1vh5AAACMxJREFUeNrs3cttI0kMAFBp4btnI5hJwVltBj5IR/dhopsUZiLwOgItsCcbomGiSFW3pPeOhlyt/hDVIlis/el02gHX6S+XAAQwIIABAQwCGBDAgAAGBDAIYEAAAwIYBDAggAEBDKQ8hH/99dOVqfjxPfrrIfjbcvaX33+i/z0Fx9gPf7+3f8/He/y2T32X6Nyy41XE1+V2PT2bgcErNCCAAQEMvPPgEuw+Szp1Wwr/m00I5RJl2QRT9rrUElaH1mtVuZdXmCgzA4NXaEAAAwIY7oUk1ucOyc+NJ1x+/+musHo5+9vjt2X4fH//eSl8v+7xuu/lcgsPqRkYBDAggAEBDPdiH+5OeI3LCedUU2VVkibdCZcZ4+2aj7HO/dhSJZblhOAVGhDAgAAGPrjWSqwg8xYuucsmL3IVUfnPRRVHu+Tnssc9No93/rl876xovKV5vMr5vqS+nxkYEMCAAAYBDGyWSqzPbWkJWnf109bPbdn0fZtRsaUSC7xCAwIYEMDAB7fTE6uyq9+cyqTKeFEl0TE5XvS5XO+stSrAuj+XNWOXRTMwIIBBAAMCGBhyO0msuBIruwtflJgZT5Dkxzsmx1snoRZ/vyV17buvX/a6xHKVbBtPWJmBwSs0IIABAQz3bFYSK9vDqne8WqXTeK+mqNIpP94uNV4lYVU5j7hiq1Ipti8cd51KsXyFnxkYEMAggAEBDDSZlcTKVuBUxjuvtslW1sSJikPqc/nER2687JLA7gqr/kTPofU8stev8lx1V4qZgQEBDAIYEMBAmzlJrGwSYU5lzVq7+s1IRPVWimWP27/r4IyeYuO7J+YbxXdXIJqBwSs0IIABAQx3a82eWJXKmvGlZfF4lSV3vb2p5ixZrCz1601YdZ9H9v5WKvci8dLBi/fYMgODV2hAAAMCGO5FLYlVq7DqbkJ++abmca+mXCVRpHLc17doxPHxKvctOo+/H6PxZlS8dR93vHIvK35eUuOZgcErNCCAAQEM96JaiRXt+rYM/8DPVtZUel1tqeIoSoBlm7i/vp1ax1tryWK+wupQuB+V5y96npfW+ChUbJmBwSs0IIABAQz3Yn86BUUgv37m/jvfiD33A3/GLoHr7eqXq+iJKpgiUSVW9L/Zz2UTW1n5xGDv9av1zhpvMh8lp/LP1floT89mYPAKDQhgQAAD79QqsaIf3/nEVrbCpbJL4HZ29etesvj6lvvcbje+BLKSGKwlrC5fKVap2IqrqS6/e6IZGLxCAwIYEMBwx2qVWNkf5N2VMDOW+mV1VzBlK6e6/3eG6PutV2m3ncquMEH3j55Y4BUaEMCAAAbembM7YVwhtEv9wK+Nt9ZStex445VT0XlkE1brLfXL7YrYX/HWWxFV6clWGc8MDF6hAQEMCGC4Y9VKrMqSrMv3xOqurMlWWG29IqpirXPrb6p/+d5o0fOXbeKuJxZ4hQYEMCCAgQ9qlViVptdxT6xdarwZu+FVElvduxOuJdtjKz9e7/2Y0Rut1usqavZuBgYEMAhgQAADAz6rxIoqjvbBj/TcUeb0uupd6pfd6S+y9aqr7mqqtfp4ZXts1ZZ89lZsxZVY5597etYTC7xCAwIYEMDAO59VYu1bjxL3fjrX32soW7FV6ek0XmHV3Zuqcj+6x6v1AOuuoIuOm90dc/x5jhNbrfFmBgav0IAABgQw3ItaT6wf37NLB3PW2pWue6lfXCHUO95aOxbO+C61Cqvt7HqpJxYggEEAAwIYaFPdnXAp/O94r6HHb+d/m7HEML8bXu+ufvldB8/He33r7WEVLX3LV7xVrl+lR9l4Yqu7J1ak0CfLDAxeoQEBDAhguBfV3QmzttQTK9u76FyUTMomcLbUT2tL1VmVpZdrVe5173oZHVdPLPAKDQhgQAADHzxMOk62wqrSE+sQjDe+K12tYmu891OlJ9aM3RO7e4XVKt7GE1H55yr63NL6POuJBV6hAQEMCGDg6x/PxUqs7O5r4+P1V8Ksk3Dp3hWxuzl7d6VYpYJuToXV5SsB87sTntMTC7xCAwIYEMDAB9VKrH3wY753vEhUCdO9FKy2G97lK4m6K6fiSrEZS/1m3LfxhFX8/I33zir0vzIDg1doQAADAhju2ZzlhDN6XVUSGt1LDKPPxZVO4wmcqCKqUikWqYwXfb/uird84nKdCrC84YotMzB4hQYEMCCA4V7MSWLlK1yOhfEqu8gdU+NVKo6iXQK3tKvftpb6HZvv71J4DpbgPLp3HdQTC7xCAwIYEMDAF2pJrNrSwehHf5TAWQrjZSusLr8b3oxd7vK9uCoVb9tZ6tc/Xu75a14SaAYGr9CAAAYEMPC1S1RiHYK/ZRMBlSVZ58fIJtlqFUK5Sp3+XRG7E1Hr9BTrrnjL3t+VeliZgQEBDAIYEMDAmEsksXIJnErCqr+yprJErtJkfkZvr/Eli9vqUXa8+P3NP6fdu3KagcErNCCAAQEMfKGWxJrQ8yc0Yxe5+LhL63hRpVg20ROPN145lT2PbKXYjPuR73VV2fXy8s+zGRi8QgMCGBDAwJcebvrsKgmhyni1SrFsc/at7+q3a/1+2YqobKJsRsWgGRgQwCCAAQEMtLnWJFYuKZFPWPWOV2lCXusR1Vthla9gGq88q4yXTzAtzeOZgQEBDAIYEMDAZNeZxMrvYpitwInGyx53rUqnLe3qlz2P7h5WL8H93XQPKzMwIIBBAAMCGBizP52C3/e/fl7fmWSrfPodkp9bNnS1DoXvd9j0uW18N8G0p2czMHiFBgQwIICBd26nJ1Y2eVFJdnX32MpWOsUOwffLNnFfJpzvITjfl9T53koiygwMCGAQwIAABto8uAT/y1YXjSdcouRZPmGVPUZ3Qig3XpwYXILzXTxqZmBAAIMABgQwMOL+klhxUmdZ6bhZ3T2dese7wl39zMCAAAYEMAhg4LrEPbEAMzAggAEBDAIYEMCAAAYBDAhgQAADAhgEMCCAAQEMCGAQwIAABgQwCGBAAAPz/CfAAHSEycl3hxN3AAAAAElFTkSuQmCC",Fe="/yanken-game/_app/assets/timer-ff7c6b24.svg";function $e(s){let e,r,t;return{c(){e=E("div"),r=E("span"),t=F(s[0]),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0});var d=R(e);r=y(d,"SPAN",{});var a=R(r);t=$(a,s[0]),a.forEach(o),d.forEach(o),this.h()},h(){m(e,"class","clock svelte-k6kg0u"),ne(e,"--clock-icon","url("+Fe+")"),q(e,"low",s[0]<3)},m(l,d){U(l,e,d),b(e,r),b(r,t)},p(l,[d]){d&1&&pe(t,l[0]),d&1&&q(e,"low",l[0]<3)},i:ie,o:ie,d(l){l&&o(e)}}}function xe(s,e,r){let t,l;const a=Be.get().select(_=>_.room);z(s,a,_=>r(3,l=_));let c=(l==null?void 0:l.options.gameScreenTimeout)||0;const M=setInterval(()=>{r(2,c=Math.max(c-1e3,0))},1e3);return We(()=>{clearInterval(M)}),s.$$.update=()=>{s.$$.dirty&4&&r(0,t=Math.trunc(c/1e3))},[t,a,c]}class es extends Me{constructor(e){super();Re(this,e,xe,$e,Ye,{})}}function Se(s,e,r){const t=s.slice();return t[24]=e[r],t}function Ze(s){let e,r,t=s[2],l=[];for(let a=0;a<t.length;a+=1)l[a]=Ge(Se(s,t,a));const d=a=>j(l[a],1,1,()=>{l[a]=null});return{c(){e=E("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var u=R(e);for(let c=0;c<l.length;c+=1)l[c].l(u);u.forEach(o),this.h()},h(){m(e,"class","players-info svelte-1dyvrko")},m(a,u){U(a,e,u);for(let c=0;c<l.length;c+=1)l[c].m(e,null);r=!0},p(a,u){if(u&4){t=a[2];let c;for(c=0;c<t.length;c+=1){const M=Se(a,t,c);l[c]?(l[c].p(M,u),N(l[c],1)):(l[c]=Ge(M),l[c].c(),N(l[c],1),l[c].m(e,null))}for(we(),c=t.length;c<l.length;c+=1)d(c);Pe()}},i(a){if(!r){for(let u=0;u<t.length;u+=1)N(l[u]);r=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)j(l[u]);r=!1},d(a){a&&o(e),Ue(l,a)}}}function Ge(s){let e,r;return e=new ze({props:{player1:s[24][0],player2:s[24][1]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,l){fe(e,t,l),r=!0},p(t,l){const d={};l&4&&(d.player1=t[24][0]),l&4&&(d.player2=t[24][1]),e.$set(d)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){j(e.$$.fragment,t),r=!1},d(t){de(e,t)}}}function ss(s){let e,r;return{c(){e=E("div"),r=F("You Win!"),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=R(e);r=$(l,"You Win!"),l.forEach(o),this.h()},h(){m(e,"class","message svelte-1dyvrko")},m(t,l){U(t,e,l),b(e,r)},p:ie,d(t){t&&o(e)}}}function ls(s){let e,r;return{c(){e=E("div"),r=F("You Lose!"),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=R(e);r=$(l,"You Lose!"),l.forEach(o),this.h()},h(){m(e,"class","message svelte-1dyvrko")},m(t,l){U(t,e,l),b(e,r)},p:ie,d(t){t&&o(e)}}}function ts(s){var d;let e,r,t=((d=s[4])==null?void 0:d.name)+"",l;return{c(){e=E("div"),r=F("Observing "),l=F(t),this.h()},l(a){e=y(a,"DIV",{class:!0});var u=R(e);r=$(u,"Observing "),l=$(u,t),u.forEach(o),this.h()},h(){m(e,"class","message svelte-1dyvrko")},m(a,u){U(a,e,u),b(e,r),b(e,l)},p(a,u){var c;u&16&&t!==(t=((c=a[4])==null?void 0:c.name)+"")&&pe(l,t)},d(a){a&&o(e)}}}function Xe(s){let e,r,t,l,d,a,u,c,M,_,A,P,X,k,J,G;return{c(){e=E("button"),r=E("img"),d=K(),a=E("button"),u=E("img"),_=K(),A=E("button"),P=E("img"),this.h()},l(f){e=y(f,"BUTTON",{class:!0});var g=R(e);r=y(g,"IMG",{alt:!0,src:!0,class:!0}),g.forEach(o),d=H(f),a=y(f,"BUTTON",{class:!0});var I=R(a);u=y(I,"IMG",{alt:!0,src:!0,class:!0}),I.forEach(o),_=H(f),A=y(f,"BUTTON",{class:!0});var w=R(A);P=y(w,"IMG",{alt:!0,src:!0,class:!0}),w.forEach(o),this.h()},h(){var f,g,I;m(r,"alt","Rock"),ge(r.src,t=Qe)||m(r,"src",t),m(r,"class","svelte-1dyvrko"),m(e,"class","action rock svelte-1dyvrko"),e.disabled=l=!!((f=s[5])==null?void 0:f.myResult),q(e,"selected",s[0]==="rock"),m(u,"alt","Paper"),ge(u.src,c=Le)||m(u,"src",c),m(u,"class","svelte-1dyvrko"),m(a,"class","action paper svelte-1dyvrko"),a.disabled=M=!!((g=s[5])==null?void 0:g.myResult),q(a,"selected",s[0]==="paper"),m(P,"alt","Scissors"),ge(P.src,X=qe)||m(P,"src",X),m(P,"class","svelte-1dyvrko"),m(A,"class","action scissors svelte-1dyvrko"),A.disabled=k=!!((I=s[5])==null?void 0:I.myResult),q(A,"selected",s[0]==="scissors")},m(f,g){U(f,e,g),b(e,r),U(f,d,g),U(f,a,g),b(a,u),U(f,_,g),U(f,A,g),b(A,P),J||(G=[he(e,"click",s[16]),he(a,"click",s[17]),he(A,"click",s[18])],J=!0)},p(f,g){var I,w,p;g&32&&l!==(l=!!((I=f[5])==null?void 0:I.myResult))&&(e.disabled=l),g&1&&q(e,"selected",f[0]==="rock"),g&32&&M!==(M=!!((w=f[5])==null?void 0:w.myResult))&&(a.disabled=M),g&1&&q(a,"selected",f[0]==="paper"),g&32&&k!==(k=!!((p=f[5])==null?void 0:p.myResult))&&(A.disabled=k),g&1&&q(A,"selected",f[0]==="scissors")},d(f){f&&o(e),f&&o(d),f&&o(a),f&&o(_),f&&o(A),J=!1,Je(G)}}}function rs(s){var Ae,n,h,C,O,S,W,Y,L,ee,se,le;let e,r,t,l,d=((Ae=s[1])==null?void 0:Ae.round)+"",a,u,c,M,_,A,P,X,k,J,G,f,g,I,w;c=new es({});let p=s[2]&&Ze(s);function x(i,v){var B,Z;if(i[3])return ts;if(((B=i[5])==null?void 0:B.myResult)==="loss")return ls;if(((Z=i[5])==null?void 0:Z.myResult)==="win")return ss}let T=x(s),D=T&&T(s);k=new Ce({props:{cardType:"full",name:(n=s[4])==null?void 0:n.name,avatar:(h=s[4])==null?void 0:h.avatar,result:(C=s[5])==null?void 0:C.myResult,pick:(O=s[5])==null?void 0:O.myPick,flipx:!0,lastPlays:s[6]&&((S=s[4])==null?void 0:S.id)&&s[6][s[4].id]}}),f=new Ce({props:{cardType:"full",name:(W=s[7])==null?void 0:W.name,avatar:(Y=s[7])==null?void 0:Y.avatar,result:(L=s[5])==null?void 0:L.rivalResult,pick:(ee=s[5])==null?void 0:ee.rivalPick,lastPlays:s[6]&&((se=s[7])==null?void 0:se.id)&&s[6][s[7].id]}});let V=!s[3]&&((le=s[1])==null?void 0:le.stage)==="game"&&Xe(s);return{c(){e=E("div"),r=E("div"),t=E("div"),l=F("Round "),a=F(d),u=K(),ce(c.$$.fragment),M=K(),p&&p.c(),_=K(),A=E("div"),D&&D.c(),P=K(),X=E("div"),ce(k.$$.fragment),J=K(),G=E("div"),ce(f.$$.fragment),g=K(),I=E("div"),V&&V.c(),this.h()},l(i){e=y(i,"DIV",{class:!0,style:!0});var v=R(e);r=y(v,"DIV",{class:!0});var B=R(r);t=y(B,"DIV",{class:!0});var Z=R(t);l=$(Z,"Round "),a=$(Z,d),Z.forEach(o),u=H(B),ue(c.$$.fragment,B),B.forEach(o),M=H(v),p&&p.l(v),_=H(v),A=y(v,"DIV",{class:!0});var Q=R(A);D&&D.l(Q),P=H(Q),X=y(Q,"DIV",{class:!0});var te=R(X);ue(k.$$.fragment,te),te.forEach(o),J=H(Q),G=y(Q,"DIV",{class:!0});var re=R(G);ue(f.$$.fragment,re),re.forEach(o),Q.forEach(o),g=H(v),I=y(v,"DIV",{class:!0});var ae=R(I);V&&V.l(ae),ae.forEach(o),v.forEach(o),this.h()},h(){m(t,"class","turn-display svelte-1dyvrko"),m(r,"class","turn-info svelte-1dyvrko"),m(X,"class","player-left svelte-1dyvrko"),m(G,"class","player-right svelte-1dyvrko"),m(A,"class","play-area svelte-1dyvrko"),m(I,"class","actions svelte-1dyvrko"),m(e,"class","game svelte-1dyvrko"),ne(e,"--background-image","url("+je+")"),ne(e,"--background-hands","url("+Ke+")"),ne(e,"--background-select","url("+He+")")},m(i,v){U(i,e,v),b(e,r),b(r,t),b(t,l),b(t,a),b(r,u),fe(c,r,null),b(e,M),p&&p.m(e,null),b(e,_),b(e,A),D&&D.m(A,null),b(A,P),b(A,X),fe(k,X,null),b(A,J),b(A,G),fe(f,G,null),b(e,g),b(e,I),V&&V.m(I,null),w=!0},p(i,[v]){var Q,te,re,ae,be,ke,Ie,Ee,ye,_e,De,Ve;(!w||v&2)&&d!==(d=((Q=i[1])==null?void 0:Q.round)+"")&&pe(a,d),i[2]?p?(p.p(i,v),v&4&&N(p,1)):(p=Ze(i),p.c(),N(p,1),p.m(e,_)):p&&(we(),j(p,1,1,()=>{p=null}),Pe()),T===(T=x(i))&&D?D.p(i,v):(D&&D.d(1),D=T&&T(i),D&&(D.c(),D.m(A,P)));const B={};v&16&&(B.name=(te=i[4])==null?void 0:te.name),v&16&&(B.avatar=(re=i[4])==null?void 0:re.avatar),v&32&&(B.result=(ae=i[5])==null?void 0:ae.myResult),v&32&&(B.pick=(be=i[5])==null?void 0:be.myPick),v&80&&(B.lastPlays=i[6]&&((ke=i[4])==null?void 0:ke.id)&&i[6][i[4].id]),k.$set(B);const Z={};v&128&&(Z.name=(Ie=i[7])==null?void 0:Ie.name),v&128&&(Z.avatar=(Ee=i[7])==null?void 0:Ee.avatar),v&32&&(Z.result=(ye=i[5])==null?void 0:ye.rivalResult),v&32&&(Z.pick=(_e=i[5])==null?void 0:_e.rivalPick),v&192&&(Z.lastPlays=i[6]&&((De=i[7])==null?void 0:De.id)&&i[6][i[7].id]),f.$set(Z),!i[3]&&((Ve=i[1])==null?void 0:Ve.stage)==="game"?V?V.p(i,v):(V=Xe(i),V.c(),V.m(I,null)):V&&(V.d(1),V=null)},i(i){w||(N(c.$$.fragment,i),N(p),N(k.$$.fragment,i),N(f.$$.fragment,i),w=!0)},o(i){j(c.$$.fragment,i),j(p),j(k.$$.fragment,i),j(f.$$.fragment,i),w=!1},d(i){i&&o(e),de(c),p&&p.d(),D&&D.d(),de(k),de(f),V&&V.d()}}}function ve(s,e){return!!e&&s.players.includes(e)}function me(s){return(s==null?void 0:s.stage)=="game"&&(s==null?void 0:s.fights)?s==null?void 0:s.fights:(s==null?void 0:s.results)&&s.results[0]?s.results[0]:[]}function Te(s,e){var r,t;return!e||((r=s==null?void 0:s.livePlayers)==null?void 0:r.includes(e))?!1:(s==null?void 0:s.stage)==="game"?(t=s==null?void 0:s.deadPlayers)==null?void 0:t.includes(e):(s==null?void 0:s.stage)==="gameEnd"?!me(s).find(a=>ve(a,e)):!1}function Oe(s,e){const t=me(s).find(d=>ve(d,e));return t==null?void 0:t.players.find(d=>d!==e)}function as(s,e){const r=s==null?void 0:s.sessions;return!r||!s?[]:me(s).filter(l=>!ve(l,e)).map(l=>l.players.map(d=>r[d]))}function oe(s){const e=s.room,r=s.session;let t=r==null?void 0:r.id;return(e==null?void 0:e.livePlayers)&&Te(e,r==null?void 0:r.id)&&(t=e.livePlayers[0]),t}function ns(s,e,r){let t,l,d,a,u,c,M;const _={1:"rock",2:"paper",3:"scissors"},A={rock:1,paper:2,scissors:3};function P(n){var O;let h={};const C=(n==null?void 0:n.stage)==="gameEnd"?1:0;return(O=n==null?void 0:n.results)==null||O.slice(C).forEach(S=>{S.forEach(W=>{W.players.forEach(Y=>{const L=W.responses[Y];L&&(h[Y]||(h[Y]=[]),h[Y].push(_[L]),h[Y]=h[Y].slice(0,2))})})}),h}function X(n,h){if((n==null?void 0:n.stage)!=="gameEnd")return{};const C=Oe(n,h);if(!h||!C)return{};let O=n.results[0],S;if(O&&(S=O.find(i=>ve(i,h))),!S)return{};let W,Y,L,ee;console.log(S),S.winner==="both"?(W="win",Y="win"):S.winner==="nobody"?(W="loss",Y="loss"):S.winner===h?(W="win",Y="loss"):(W="loss",Y="win");const se=S.responses[h];se&&(L=_[se]);const le=S.responses[C];return le&&(ee=_[le]),{myResult:W,myPick:L,rivalResult:Y,rivalPick:ee}}const k=Be.get(),J=k.select(n=>n.room);z(s,J,n=>r(1,t=n));const G=k.select(n=>as(n.room,oe(n)));z(s,G,n=>r(2,l=n));const f=k.select(n=>X(n.room,oe(n)));z(s,f,n=>r(5,u=n));const g=k.select(({room:n,session:h})=>Te(n,h==null?void 0:h.id));z(s,g,n=>r(3,d=n));const I=k.select(({room:n})=>P(n));z(s,I,n=>r(6,c=n));const w=k.select(n=>{var C;const h=oe(n);return h?(C=n==null?void 0:n.room)==null?void 0:C.sessions[h]:null});z(s,w,n=>r(4,a=n));const p=k.select(n=>{var O;const h=oe(n),C=Oe(n==null?void 0:n.room,h);return C?(O=n==null?void 0:n.room)==null?void 0:O.sessions[C]:null});z(s,p,n=>r(7,M=n));let x=null;function T(n){r(0,x=n),k.emit(new Ne(A[n]))}return[x,t,l,d,a,u,c,M,J,G,f,g,I,w,p,T,()=>T("rock"),()=>T("paper"),()=>T("scissors")]}class vs extends Me{constructor(e){super();Re(this,e,ns,rs,Ye,{})}}export{vs as default};
