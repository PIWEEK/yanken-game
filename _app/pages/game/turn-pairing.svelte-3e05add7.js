import{S as F,i as G,s as H,e as k,c as j,a as D,d as p,b as M,a6 as J,f as B,a3 as Z,_ as K,a4 as N,j as P,m as R,o as z,x as I,u as V,v as C,$ as O,a8 as ee,t as S,k as x,g as T,n as A,E as _,h as te,r as se,w as re}from"../../chunks/vendor-a7bd5f25.js";import{s as ne}from"../../chunks/store-344738a1.js";import{M as ae}from"../../chunks/MatchData-f4fffa53.js";import{M as le}from"../../chunks/MenuContainer-eb9e4ac9.js";import"../../chunks/PlayerCard-9b25eda5.js";function Q(n,e,s){const t=n.slice();return t[4]=e[s],t}function U(n){let e;return{c(){e=k("div"),this.h()},l(s){e=j(s,"DIV",{class:!0}),D(e).forEach(p),this.h()},h(){M(e,"class","bullet svelte-nna29y"),J(e,"filled",!n[4])},m(s,t){B(s,e,t)},p(s,t){t&1&&J(e,"filled",!s[4])},d(s){s&&p(e)}}}function oe(n){let e,s=n[0],t=[];for(let r=0;r<s.length;r+=1)t[r]=U(Q(n,s,r));return{c(){e=k("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=j(r,"DIV",{class:!0,style:!0});var o=D(e);for(let a=0;a<t.length;a+=1)t[a].l(o);o.forEach(p),this.h()},h(){M(e,"class","progress svelte-nna29y"),Z(e,"--bullet-count",q)},m(r,o){B(r,e,o);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(r,[o]){if(o&1){s=r[0];let a;for(a=0;a<s.length;a+=1){const f=Q(r,s,a);t[a]?t[a].p(f,o):(t[a]=U(f),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},i:K,o:K,d(r){r&&p(e),N(t,r)}}}const q=14;function ie(n,e,s){let t,r,o,{progress:a=0}=e;return n.$$set=f=>{"progress"in f&&s(1,a=f.progress)},n.$$.update=()=>{n.$$.dirty&2&&s(3,t=Math.min(Math.floor(q*a/100),q)),n.$$.dirty&8&&s(2,r=Math.max(0,q-t)),n.$$.dirty&12&&s(0,o=[...new Array(t).fill(!0),...new Array(r).fill(!1)])},[o,a,r,t]}class ce extends F{constructor(e){super();G(this,e,ie,oe,H,{progress:1})}}function W(n,e,s){const t=n.slice();return t[9]=e[s],t}function X(n){let e,s;return e=new ae({props:{player1:n[9][0],player2:n[9][1]}}),{c(){P(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,r){const o={};r&4&&(o.player1=t[9][0]),r&4&&(o.player2=t[9][1]),e.$set(o)},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function ue(n){var L;let e,s,t,r=((L=n[1])==null?void 0:L.round)+"",o,a,f,$,d,g,y,h,E;g=new ce({props:{progress:n[0]}});let v=n[2],i=[];for(let l=0;l<v.length;l+=1)i[l]=X(W(n,v,l));const Y=l=>V(i[l],1,1,()=>{i[l]=null});return{c(){e=k("div"),s=k("div"),t=S("Round "),o=S(r),a=x(),f=k("div"),$=S("Ready to fight?"),d=x(),P(g.$$.fragment),y=x(),h=k("div");for(let l=0;l<i.length;l+=1)i[l].c();this.h()},l(l){e=j(l,"DIV",{class:!0});var c=D(e);s=j(c,"DIV",{class:!0});var m=D(s);t=T(m,"Round "),o=T(m,r),m.forEach(p),a=A(c),f=j(c,"DIV",{class:!0});var w=D(f);$=T(w,"Ready to fight?"),w.forEach(p),d=A(c),R(g.$$.fragment,c),y=A(c),h=j(c,"DIV",{class:!0});var u=D(h);for(let b=0;b<i.length;b+=1)i[b].l(u);u.forEach(p),c.forEach(p),this.h()},h(){M(s,"class","round svelte-1unjzmq"),M(f,"class","message svelte-1unjzmq"),M(h,"class","matches-list svelte-1unjzmq"),M(e,"class","container svelte-1unjzmq")},m(l,c){B(l,e,c),_(e,s),_(s,t),_(s,o),_(e,a),_(e,f),_(f,$),_(e,d),z(g,e,null),_(e,y),_(e,h);for(let m=0;m<i.length;m+=1)i[m].m(h,null);E=!0},p(l,c){var w;(!E||c&2)&&r!==(r=((w=l[1])==null?void 0:w.round)+"")&&te(o,r);const m={};if(c&1&&(m.progress=l[0]),g.$set(m),c&4){v=l[2];let u;for(u=0;u<v.length;u+=1){const b=W(l,v,u);i[u]?(i[u].p(b,c),I(i[u],1)):(i[u]=X(b),i[u].c(),I(i[u],1),i[u].m(h,null))}for(se(),u=v.length;u<i.length;u+=1)Y(u);re()}},i(l){if(!E){I(g.$$.fragment,l);for(let c=0;c<v.length;c+=1)I(i[c]);E=!0}},o(l){V(g.$$.fragment,l),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)V(i[c]);E=!1},d(l){l&&p(e),C(g),N(i,l)}}}function fe(n){let e,s;return e=new le({props:{hideRoom:!0,$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){z(e,t,r),s=!0},p(t,[r]){const o={};r&4103&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function he(n){const e=n.room;if(!e||!e.fights)return[];const s=e.sessions;return e.fights.map(t=>t.players.map(r=>s[r]))}function ge(n,e,s){let t,r,o;const a=ne.get(),f=a.select(h=>h.room);O(n,f,h=>s(1,r=h));const $=a.select(he);O(n,$,h=>s(2,o=h));let d=0;const g=setInterval(()=>{s(5,d+=100)},100),y=r==null?void 0:r.options.pairingScreenTimeout;return ee(()=>{clearInterval(g)}),n.$$.update=()=>{n.$$.dirty&32&&s(0,t=y?d*100/y:100)},[t,r,o,f,$,d]}class $e extends F{constructor(e){super();G(this,e,ge,fe,H,{})}}export{$e as default};
