import{S as O,i as Y,s as q,j,m as C,o as w,x as h,u as _,v as E,$ as g,e as v,c as $,a as y,d as p,b as k,f as D,r as I,w as M,a4 as B,t as b,k as R,g as P,n as T,E as d,h as z}from"../../../chunks/vendor-a7bd5f25.js";import{s as A}from"../../../chunks/store-344738a1.js";import{P as F}from"../../../chunks/PlayerCard-8965b305.js";import{M as G}from"../../../chunks/MenuContainer-eb9e4ac9.js";function S(i,s,n){const t=i.slice();return t[7]=s[n],t}function V(i){let s,n,t=i[1].players,a=[];for(let l=0;l<t.length;l+=1)a[l]=L(S(i,t,l));const c=l=>_(a[l],1,1,()=>{a[l]=null});return{c(){s=v("div");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){s=$(l,"DIV",{class:!0});var r=y(s);for(let e=0;e<a.length;e+=1)a[e].l(r);r.forEach(p),this.h()},h(){k(s,"class","player-list svelte-68aoly")},m(l,r){D(l,s,r);for(let e=0;e<a.length;e+=1)a[e].m(s,null);n=!0},p(l,r){if(r&6){t=l[1].players;let e;for(e=0;e<t.length;e+=1){const m=S(l,t,e);a[e]?(a[e].p(m,r),h(a[e],1)):(a[e]=L(m),a[e].c(),h(a[e],1),a[e].m(s,null))}for(I(),e=t.length;e<a.length;e+=1)c(e);M()}},i(l){if(!n){for(let r=0;r<t.length;r+=1)h(a[r]);n=!0}},o(l){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)_(a[r]);n=!1},d(l){l&&p(s),B(a,l)}}}function L(i){let s,n;return s=new F({props:{name:i[1].sessions[i[7]].name,avatar:i[1].sessions[i[7]].avatar||"red",result:i[2].has(i[7])?"loss":null,flipx:!0}}),{c(){j(s.$$.fragment)},l(t){C(s.$$.fragment,t)},m(t,a){w(s,t,a),n=!0},p(t,a){const c={};a&2&&(c.name=t[1].sessions[t[7]].name),a&2&&(c.avatar=t[1].sessions[t[7]].avatar||"red"),a&6&&(c.result=t[2].has(t[7])?"loss":null),s.$set(c)},i(t){n||(h(s.$$.fragment,t),n=!0)},o(t){_(s.$$.fragment,t),n=!1},d(t){E(s,t)}}}function H(i){var m;let s,n,t,a,c,l,r,e=((m=i[1])==null?void 0:m.players)&&V(i);return{c(){s=v("div"),n=v("div"),t=b("Only "),a=b(i[0]),c=b(" Yankens left!"),l=R(),e&&e.c(),this.h()},l(o){s=$(o,"DIV",{class:!0});var u=y(s);n=$(u,"DIV",{class:!0});var f=y(n);t=P(f,"Only "),a=P(f,i[0]),c=P(f," Yankens left!"),f.forEach(p),l=T(u),e&&e.l(u),u.forEach(p),this.h()},h(){k(n,"class","message svelte-68aoly"),k(s,"class","container svelte-68aoly")},m(o,u){D(o,s,u),d(s,n),d(n,t),d(n,a),d(n,c),d(s,l),e&&e.m(s,null),r=!0},p(o,u){var f;(!r||u&1)&&z(a,o[0]),((f=o[1])==null?void 0:f.players)?e?(e.p(o,u),u&2&&h(e,1)):(e=V(o),e.c(),h(e,1),e.m(s,null)):e&&(I(),_(e,1,1,()=>{e=null}),M())},i(o){r||(h(e),r=!0)},o(o){_(e),r=!1},d(o){o&&p(s),e&&e.d()}}}function J(i){let s,n;return s=new G({props:{$$slots:{default:[H]},$$scope:{ctx:i}}}),{c(){j(s.$$.fragment)},l(t){C(s.$$.fragment,t)},m(t,a){w(s,t,a),n=!0},p(t,[a]){const c={};a&1031&&(c.$$scope={dirty:a,ctx:t}),s.$set(c)},i(t){n||(h(s.$$.fragment,t),n=!0)},o(t){_(s.$$.fragment,t),n=!1},d(t){E(s,t)}}}function K(i,s,n){let t,a,c;const l=A.get(),r=l.select(o=>o.room);g(i,r,o=>n(1,a=o));const e=l.select(o=>{var u,f;return(f=(u=o.room)==null?void 0:u.livePlayers)==null?void 0:f.length});g(i,e,o=>n(0,t=o));const m=l.select(o=>{var u;return new Set((u=o.room)==null?void 0:u.deadPlayers)});return g(i,m,o=>n(2,c=o)),[t,a,c,r,e,m]}class X extends O{constructor(s){super();Y(this,s,K,J,q,{})}}export{X as default};
