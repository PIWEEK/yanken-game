import{S as F,i as G,s as H,e as k,c as j,a as D,d as p,b as I,a6 as J,f as q,a3 as Z,_ as K,a4 as N,j as B,m as P,o as R,x as E,u as V,v as z,$ as O,a8 as ee,t as C,k as S,g as T,n as x,E as _,h as te,r as se,w as re}from"../../../chunks/vendor-a7bd5f25.js";import{s as ne}from"../../../chunks/store-344738a1.js";import{M as ae}from"../../../chunks/MatchData-f43f9d9c.js";import{M as le}from"../../../chunks/MenuContainer-eb9e4ac9.js";import"../../../chunks/PlayerCard-8965b305.js";function Q(n,e,s){const t=n.slice();return t[4]=e[s],t}function U(n){let e;return{c(){e=k("div"),this.h()},l(s){e=j(s,"DIV",{class:!0}),D(e).forEach(p),this.h()},h(){I(e,"class","bullet svelte-nna29y"),J(e,"filled",!n[4])},m(s,t){q(s,e,t)},p(s,t){t&1&&J(e,"filled",!s[4])},d(s){s&&p(e)}}}function oe(n){let e,s=n[0],t=[];for(let r=0;r<s.length;r+=1)t[r]=U(Q(n,s,r));return{c(){e=k("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=j(r,"DIV",{class:!0,style:!0});var o=D(e);for(let a=0;a<t.length;a+=1)t[a].l(o);o.forEach(p),this.h()},h(){I(e,"class","progress svelte-nna29y"),Z(e,"--bullet-count",A)},m(r,o){q(r,e,o);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(r,[o]){if(o&1){s=r[0];let a;for(a=0;a<s.length;a+=1){const f=Q(r,s,a);t[a]?t[a].p(f,o):(t[a]=U(f),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},i:K,o:K,d(r){r&&p(e),N(t,r)}}}const A=14;function ce(n,e,s){let t,r,o,{progress:a=0}=e;return n.$$set=f=>{"progress"in f&&s(1,a=f.progress)},n.$$.update=()=>{n.$$.dirty&2&&s(3,t=Math.floor(A*a/100)),n.$$.dirty&8&&s(2,r=A-t),n.$$.dirty&12&&s(0,o=[...new Array(t).fill(!0),...new Array(r).fill(!1)])},[o,a,r,t]}class ie extends F{constructor(e){super();G(this,e,ce,oe,H,{progress:1})}}function W(n,e,s){const t=n.slice();return t[9]=e[s],t}function X(n){let e,s;return e=new ae({props:{player1:n[9][0],player2:n[9][1]}}),{c(){B(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){R(e,t,r),s=!0},p(t,r){const o={};r&4&&(o.player1=t[9][0]),r&4&&(o.player2=t[9][1]),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function ue(n){var L;let e,s,t,r=((L=n[1])==null?void 0:L.round)+"",o,a,f,$,d,g,y,h,M;g=new ie({props:{progress:n[0]}});let v=n[2],c=[];for(let l=0;l<v.length;l+=1)c[l]=X(W(n,v,l));const Y=l=>V(c[l],1,1,()=>{c[l]=null});return{c(){e=k("div"),s=k("div"),t=C("Round "),o=C(r),a=S(),f=k("div"),$=C("Ready to fight?"),d=S(),B(g.$$.fragment),y=S(),h=k("div");for(let l=0;l<c.length;l+=1)c[l].c();this.h()},l(l){e=j(l,"DIV",{class:!0});var i=D(e);s=j(i,"DIV",{class:!0});var m=D(s);t=T(m,"Round "),o=T(m,r),m.forEach(p),a=x(i),f=j(i,"DIV",{class:!0});var w=D(f);$=T(w,"Ready to fight?"),w.forEach(p),d=x(i),P(g.$$.fragment,i),y=x(i),h=j(i,"DIV",{class:!0});var u=D(h);for(let b=0;b<c.length;b+=1)c[b].l(u);u.forEach(p),i.forEach(p),this.h()},h(){I(s,"class","round svelte-1unjzmq"),I(f,"class","message svelte-1unjzmq"),I(h,"class","matches-list svelte-1unjzmq"),I(e,"class","container svelte-1unjzmq")},m(l,i){q(l,e,i),_(e,s),_(s,t),_(s,o),_(e,a),_(e,f),_(f,$),_(e,d),R(g,e,null),_(e,y),_(e,h);for(let m=0;m<c.length;m+=1)c[m].m(h,null);M=!0},p(l,i){var w;(!M||i&2)&&r!==(r=((w=l[1])==null?void 0:w.round)+"")&&te(o,r);const m={};if(i&1&&(m.progress=l[0]),g.$set(m),i&4){v=l[2];let u;for(u=0;u<v.length;u+=1){const b=W(l,v,u);c[u]?(c[u].p(b,i),E(c[u],1)):(c[u]=X(b),c[u].c(),E(c[u],1),c[u].m(h,null))}for(se(),u=v.length;u<c.length;u+=1)Y(u);re()}},i(l){if(!M){E(g.$$.fragment,l);for(let i=0;i<v.length;i+=1)E(c[i]);M=!0}},o(l){V(g.$$.fragment,l),c=c.filter(Boolean);for(let i=0;i<c.length;i+=1)V(c[i]);M=!1},d(l){l&&p(e),z(g),N(c,l)}}}function fe(n){let e,s;return e=new le({props:{hideRoom:!0,$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,r){R(e,t,r),s=!0},p(t,[r]){const o={};r&4103&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function he(n){const e=n.room;if(!e||!e.fights)return[];const s=e.sessions;return e.fights.map(t=>t.players.map(r=>s[r]))}function ge(n,e,s){let t,r,o;const a=ne.get(),f=a.select(h=>h.room);O(n,f,h=>s(1,r=h));const $=a.select(he);O(n,$,h=>s(2,o=h));let d=0;const g=setInterval(()=>{s(5,d+=100)},100),y=r==null?void 0:r.options.pairingScreenTimeout;return ee(()=>{clearInterval(g)}),n.$$.update=()=>{n.$$.dirty&32&&s(0,t=y?d*100/y:100)},[t,r,o,f,$,d]}class $e extends F{constructor(e){super();G(this,e,ge,fe,H,{})}}export{$e as default};
